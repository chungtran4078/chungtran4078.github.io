{"componentChunkName":"component---src-templates-blog-post-js","path":"/put-vs-patch-in-restfull/","result":{"data":{"site":{"siteMetadata":{"title":"Chung Tran","author":"@chungtran4078"}},"markdownRemark":{"id":"7a9d2ebd-91b4-5d99-9c18-2ea548d14c26","excerpt":"RESTful APIs enable you to develop any kind of web application having all possible CRUD (create, retrieve, update, delete) operations RESTfull có các phương…","html":"<blockquote>\n<p>RESTful APIs enable you to develop any kind of web application having all possible CRUD (create, retrieve, update, delete) operations</p>\n<footer>https://<span></span>restfulapi.net</footer>\n</blockquote>\n<p>RESTfull có các phương thức cơ bản sau:</p>\n<table>\n<thead>\n<tr>\n<th>Method</th>\n<th>Semantics</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>GET</td>\n<td>Retrieve resources</td>\n</tr>\n<tr>\n<td>POST</td>\n<td>Create a new resource</td>\n</tr>\n<tr>\n<td>PUT</td>\n<td>Update a resource</td>\n</tr>\n<tr>\n<td>PATCH</td>\n<td>Update a resource</td>\n</tr>\n<tr>\n<td>DELETE</td>\n<td>Delete a resource</td>\n</tr>\n</tbody>\n</table>\n<p><em>Ngoài ra còn có HEAD, OPTIONS nhưng hầu như không sử dụng nhiều.</em></p>\n<p>Ở đây ta để ý thấy PUT vs PATCH đều có ý nghĩa là sử dụng để <strong>“Update a resource”</strong>. Vậy PUT và PATCH có gì khác nhau?</p>\n<h2>PUT</h2>\n<p>Theo HTTP RFC, khi sử dụng PUT để update, ta phải gửi 1 bản ghi đầy đủ các field để yêu cầu cập nhật. Nếu chỉ gửi 1 số field nhất định thì những field còn lại sẽ bị xóa (tức bị null)</p>\n<p><strong>VD:</strong></p>\n<p>Mình có record như sau:</p>\n<p><em>Request: <code class=\"language-text\">GET /idol/2</code></em></p>\n<p><em>Response:</em></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Khá Bảnh\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"age\"</span><span class=\"token operator\">:</span> <span class=\"token number\">25</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"skill\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"xòe quạt\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Sau đó mình bổ sung skill <em>vinahey</em> cho anh Bảnh.</p>\n<p><em>Request: <code class=\"language-text\">PUT /idol/2</code></em></p>\n<p><em>Request payload:</em></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n    skill<span class=\"token operator\">:</span> <span class=\"token string\">\"xòe quạt, vinahey\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Bây giờ mình kiểm tra lại xem thông tin a Bảnh đã được cập nhật chưa.</p>\n<p><em>Request: <code class=\"language-text\">GET /idol/2</code></em></p>\n<p><em>Response:</em></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"skill\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"xòe quạt, vinahey\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Dường như có vẻ được cập nhật rồi. Ơ mà khoan có gì đó sai sai, field <strong>name</strong> và <strong>age</strong> đâu?</p>\n<p>Thì ra đó là cách làm việc của PUT.</p>\n<h2>PATCH</h2>\n<p>Theo HTTP RFC, PATCH giống PUT về ý nghĩa nhưng khác nhau về cách làm việc, nó chỉ thay đổi những field được yêu cầu thay vì thay đổi toàn bộ record.</p>\n<p><strong>Áp dụng lại VD trên:</strong></p>\n<p>Mình có record như sau:</p>\n<p><em>Request: <code class=\"language-text\">GET /idol/2</code></em></p>\n<p><em>Response:</em></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Khá Bảnh\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"age\"</span><span class=\"token operator\">:</span> <span class=\"token number\">25</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"skill\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"xòe quạt\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Sau đó mình bổ sung skill <em>vinahey</em> cho anh Bảnh.</p>\n<p><em>Request: <code class=\"language-text\">PATCH /idol/2</code></em></p>\n<p><em>Request payload:</em></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n    skill<span class=\"token operator\">:</span> <span class=\"token string\">\"xòe quạt, vinahey\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Bây giờ mình kiểm tra lại xem thông tin a Bảnh đã được cập nhật chưa.</p>\n<p><em>Request: <code class=\"language-text\">GET /idol/2</code></em></p>\n<p><em>Response:</em></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Khá Bảnh\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"age\"</span><span class=\"token operator\">:</span> <span class=\"token number\">25</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"skill\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"xòe quạt, vinahey\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Hoàn hảo, PATCH chỉ cập nhật những field được yêu cầu thay vì cập nhật toàn bộ.</p>","frontmatter":{"title":"PUT vs PATCH ?","date":"2019-01-12","category":"API","tags":["RESTfull"]}}},"pageContext":{"slug":"/put-vs-patch-in-restfull/","previous":{"fields":{"slug":"/contributor-project-github/"},"frontmatter":{"title":"Đóng góp code cho một dự án trên Github","category":"Github","tags":["github"]}},"next":{"fields":{"slug":"/su-dung-vim-trong-linux/"},"frontmatter":{"title":"Sử dụng VIM editor trong linux","category":"Linux","tags":["linux"]}}}}}