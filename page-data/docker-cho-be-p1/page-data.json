{"componentChunkName":"component---src-templates-blog-post-js","path":"/docker-cho-be-p1/","result":{"data":{"site":{"siteMetadata":{"title":"Chung Tran","author":"@anhchungite"}},"markdownRemark":{"id":"1091338b-95d4-52a6-9eb2-f8744f76f159","excerpt":"Chào bé L…à nhầm chào các bé, dạo này các em đã dùng Docker chưa tar..tar..tar..tar… Sau một thời gian mày mò, mân mê thằng Docker thì mình quyết định viết vài…","html":"<blockquote>\n<p>Chào bé L…à nhầm chào các bé, dạo này các em đã dùng Docker chưa tar..tar..tar..tar…</p>\n</blockquote>\n<p>Sau một thời gian mày mò, mân mê thằng Docker thì mình quyết định viết vài bài về cách sử dụng để chia sẻ cùng mọi người. </p>\n<p>Có thể bạn thừa biết, Docker được sử dụng trong nhiều hệ thống lớn, có cấu hình phức tạp. Tuy vậy do kiến thức hạn chế và bám sát trọng tâm là để ai cũng có thể hiểu và sử dụng được nên mình sẽ hướng dẫn Docker ở mức cơ bản.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bd02b8b3494e88ad5991c5f114d20c0d/c2d9c/docker.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.94594594594595%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABmElEQVQoz2P4jw38/fcPSF65/3DyzqOPnz7+/+0tkP8PDJCVMSBzgHJ/////9vP3yUtXDx3c17pkpUjZlLXbN329fRAo++Pb179/fv8FK0PXDBF6+OLNtgNHNMu71Oun67TMVamdtGXP/g8fPwOlaredXH78ElDh339oNv8DCT19+XTl9rX2TVN0aiYq105Rqpms0zjDtLx96d7DQCVFOy5KLToXsHj3uTsPIV5jQLb28NXTMXOXibYsM+xbo969UqVrhcGkjaINC2IXbl9z+aHb6lN6S0+U7j7/6t17iBao5u8/f12+cD561gbe9g1aC47LLz6n0LNOafZhxVmH1HrXy84/xdu/W6Jp8b6Dh29fvvTnzx8UZ/8C8v/+Wbr/BEPtMob+Xdz9WxWnbGaafoBt2n6OybuZJu5jqF62YMcBoH/fffr89+9fFM2Q8Pv540fOvHVJS7fn7TjNN+sow5QjTBMOMLRs5WlcOX3PSZAy1BhFjiqQ1K/v3y5du7br9JmoxTtl21Y5TNnQsPHQg6fP/iPFEBwAAFLVrM+GS5XgAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Docker cho bé\"\n        title=\"Docker cho bé\"\n        src=\"/static/bd02b8b3494e88ad5991c5f114d20c0d/fcda8/docker.png\"\n        srcset=\"/static/bd02b8b3494e88ad5991c5f114d20c0d/12f09/docker.png 148w,\n/static/bd02b8b3494e88ad5991c5f114d20c0d/e4a3f/docker.png 295w,\n/static/bd02b8b3494e88ad5991c5f114d20c0d/fcda8/docker.png 590w,\n/static/bd02b8b3494e88ad5991c5f114d20c0d/efc66/docker.png 885w,\n/static/bd02b8b3494e88ad5991c5f114d20c0d/c83ae/docker.png 1180w,\n/static/bd02b8b3494e88ad5991c5f114d20c0d/c2d9c/docker.png 1326w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>Docker ra đời như thế nào?</h2>\n<p>Như ta đã biết, trước đây 1 máy chủ vật lý chỉ cài được 1 OS và để chạy một hệ thống nhiều service trên nhiều máy chủ ta sẽ phải sử dụng nhiều máy vật lý. Như vậy sẽ tốn kém tiền bạc và lãng phí tài nguyên vì có những service sẽ không tận dụng hết RAM, ổ cứng, CPU của máy chủ đó.</p>\n<p>Giống như mua máy có cấu hình khủng chỉ để chơi pikachu hay lướt facebook vậy.</p>\n<h3>Công nghệ ảo hóa Vitualization</h3>\n<p>Sau khi có sự xuất hiện của công nghệ ảo hóa Vitualization thì ta có thể cài nhiều OS trên 1 máy vật lý thông qua VMware, Vitualbox, Vagrant…</p>\n<p>Bây giờ đã giải quyết được bài toán <strong>chạy nhiều máy ảo trên một máy chủ vật lý</strong> tuy nhiên cũng còn những nhược điểm của công nghệ ảo hóa này:</p>\n<ul>\n<li>Khi sử dụng VMware, Vitualbox để chạy máy ảo thì chúng ta phải cung cấp 1 phần ổ ứng, RAM, CPU từ máy thật cho chúng. Mỗi máy ảo là 1 máy độc lập hoàn toàn.</li>\n</ul>\n<blockquote>\n<p>VD mẹ có 1 nồi cơm, và phải chia cho 3 người con mỗi người 2 bát trong khi 3 người con thì có người không ăn, có người thì chỉ ăn hết 1 bát, lại có người ăn hết 2 bát vẫn chưa no.</p>\n</blockquote>\n<p>Như vậy là tài nguyên được sử dụng không tối ưu.</p>\n<ul>\n<li>Thời gian khởi động và tắt 1 máy ảo cũng diễn ra rất lâu, có thể mất lên tới vài phút để khởi động 1 máy ảo.</li>\n</ul>\n<h3>Công nghệ Containerlization</h3>\n<p>Công nghệ này giống với công nghệ ảo hóa Vitualization là ta có thể tạo nhiều máy con trên 1 máy vật lý, nhưng đã khắc phục được những nhược điểm của công nghệ nói trên:</p>\n<ul>\n<li>Các máy con nay không độc lập hoàn toàn mà đều dùng chung OS KERNEL với máy mẹ và chia sẻ với nhau tài nguyên máy vật lý.</li>\n</ul>\n<blockquote>\n<p>VD mẹ có 1 nồi cơm và có 3 người con thì ai ăn từng nào thì lấy từng đấy bát cơm, ai không ăn thì thôi để người khác ăn.</p>\n</blockquote>\n<p>Như vậy việc quản lý sử dụng tài nguyên các máy đã tối ưu rồi, dùng bao nhiêu RAM thì lấy bấy nhiêu thôi, chứ đâu như ai kia xin tới 4G RAM xong dùng có 2GB.</p>\n<ul>\n<li>Thời gian khởi động và tắt nay chỉ tính bằng giây thôi =))</li>\n</ul>\n<p>À còn 1 điều nữa là 1 <strong>máy ảo</strong> trên <strong>Vitualization</strong> nay là 1 <strong>container</strong> trên <strong>Containerlization</strong>. </p>\n<h2>Một số khái niệm chính</h2>\n<ul>\n<li><strong>Docker image</strong>: tương tự file ghost của Windows vậy. Trong file ghost của Windows có thể chứa sẵn Word, Chrome, Unikey… thì image của Docker cũng có thể chứa sẵn php, mysql, git… </li>\n</ul>\n<p>Có thể tải các image có sẵn do cộng đồng chia sẻ từ <a href=\"https://hub.docker.com\" target=\"_blank\" rel=\"nofollow\">Docker hub</a></p>\n<ul>\n<li><strong>Docker container</strong>: như mình có đề cập bên trên, container tương tự như máy ảo. Container được khởi tạo từ image. Container có thể là container Windows (dành cho Windows Server) hoặc container Linux (dành Linux Server).</li>\n<li><strong>Dockerfile</strong>: là 1 file text, chứa các cấu hình của một image. Nếu bạn không muốn sử dụng các image có sẵn từ Docker hub thì bạn cũng có thể build cho riêng mình 1 image bằng Dockerfile. Chi tiết mình sẽ nói ở phần sau.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0902b7696a0dc603a79dc5af6412afd0/1ff84/Dockerfile.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.324324324324326%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABJ0lEQVQY022PT0vCcBjHPXbs3XTtNRT0KrpLFHQKwkOHLkE382AQddnQg5UrOkiyiAhFUtTp5qb7TUs2p7l9mvOS0QceHp5/X75PolQqoaoqnuexIAiCOBYIx6FSqa7MwjCMchjXjmmgNT7Q200IlzeJQqFAOp3Gtm3+MrQtGrV3ZlOfSstZmfXdKQ+aoNy1UVsmdVMsBZPJJJlMBl3X0TQtig5i0KOm+xxm2+yfFbl4crl/tTB7Bh3dwBUW2arJxmWHrXyf9WOFzdO7xQ8kUqkUsixjGAbj8ThyKgi+I0dNm6Nrg70rlxNZxMueN8EZjpj7Hm/WJ7v5Otu5LmsHEjvnxaVDRVGQJCkW+818PsO0etS1Ab4/4T+sQZ/b5xduHss4o6+49wOcrmgrGhaOSgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dockerfile\"\n        title=\"Dockerfile\"\n        src=\"/static/0902b7696a0dc603a79dc5af6412afd0/fcda8/Dockerfile.png\"\n        srcset=\"/static/0902b7696a0dc603a79dc5af6412afd0/12f09/Dockerfile.png 148w,\n/static/0902b7696a0dc603a79dc5af6412afd0/e4a3f/Dockerfile.png 295w,\n/static/0902b7696a0dc603a79dc5af6412afd0/fcda8/Dockerfile.png 590w,\n/static/0902b7696a0dc603a79dc5af6412afd0/efc66/Dockerfile.png 885w,\n/static/0902b7696a0dc603a79dc5af6412afd0/1ff84/Dockerfile.png 1040w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li><strong>Docker compose</strong>: thay vì cài đặt tất cả service (mysql, php, redis…) lên 1 container thì chúng ta có thể sử dụng <strong>docker-compose</strong> để chạy mỗi service trên mỗi container và kết nối các container lại với nhau. Giống như một hệ thống thực tế vậy. Chi tiết mình sẽ nói ở phần sau. </li>\n</ul>\n<h2>Cài đặt</h2>\n<p>Docker hỗ trợ bao gồm Linux, Windows và Mac việc cài đặt đơn giản nên mình không nói ở đây nữa ha.</p>\n<p>Có thể download ở đây <a href=\"https://docs.docker.com/install/\" target=\"_blank\" rel=\"nofollow\">Docker install</a></p>\n<h2>Một số câu lệnh cơ bản</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Pull một image từ Docker Hub</span>\ndocker pull image_name\n\n<span class=\"token comment\"># Liệt kê các images hiện có</span>\ndocker images\n\n<span class=\"token comment\"># Xóa một image</span>\ndocker rmi image_id/image_name\n\n<span class=\"token comment\"># Khởi tạo 1 container</span>\n<span class=\"token comment\"># Docker sẽ tự động pull image về và khởi tạo container nếu image đó chưa tồn tại trên máy (image chưa được pull)</span>\ndocker run image_name\n\n<span class=\"token comment\"># Khởi tạo và chạy 1 container cùng với các option:</span>\ndocker run -d -v <span class=\"token operator\">&lt;</span>forder_in_computer<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>forder_in_container<span class=\"token operator\">></span> -p <span class=\"token operator\">&lt;</span>port_in_computer<span class=\"token operator\">></span>:<span class=\"token operator\">&lt;</span>port_in_container<span class=\"token operator\">></span> -it <span class=\"token operator\">&lt;</span>image_name<span class=\"token operator\">></span> <span class=\"token function\">bash</span>\n\n<span class=\"token comment\"># Chạy 1 container</span>\ndocker start container_name/container_id\n\n<span class=\"token comment\"># Dừng 1 container</span>\ndocker stop container_name/container_id\n\n<span class=\"token comment\"># Truy cập vào container đang chạy</span>\ndocker <span class=\"token builtin class-name\">exec</span> -it container_name/container_id <span class=\"token function\">bash</span>\n\n<span class=\"token comment\"># Liệt kê các container đang chạy</span>\ndocker <span class=\"token function\">ps</span>\n\n<span class=\"token comment\"># Liệt kê các container đã tắt</span>\ndocker <span class=\"token function\">ps</span> -a: \n\n<span class=\"token comment\"># Xóa 1 container</span>\ndocker <span class=\"token function\">rm</span> -f container_name/container_id </code></pre></div>\n<p>Các câu lệnh này sang phần sau sử dụng mình sẽ nói rõ hơn.</p>\n<p>Chắc hôm nào mình cũng sẽ viết một bài dành riêng về các câu lệnh hay ho của Docker để mọi người khi sử dụng đỡ phải mất công kiếm.</p>","frontmatter":{"title":"Docker cho bé - P1: Hello Docker!","date":"2019-04-20","category":"Docker","tags":["linux","docker","development tools"]}}},"pageContext":{"slug":"/docker-cho-be-p1/","previous":{"fields":{"slug":"/chmod-and-chown/"},"frontmatter":{"title":"chmod vs chown","category":"Linux","tags":["linux"]}},"next":{"fields":{"slug":"/docker-cho-be-p2/"},"frontmatter":{"title":"Docker cho bé - P2: Build image từ Dockerfile","category":"Docker","tags":["linux","docker","development tools"]}}}}}